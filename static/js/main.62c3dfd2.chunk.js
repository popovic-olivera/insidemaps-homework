(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var i=n(6),o=n(9),r=n.n(o),a=n(12),s=n.n(a),c=(n(20),n(13)),l=n(0),d=n(4),u=n(7),h=n(2),x=n(3),p=n(1),w=n(14),b=function(){function e(t){Object(l.a)(this,e),this.originalBox=void 0;var n=new p.b(t,t,t),i=new p.i({color:1401481,shininess:50,flatShading:!0});e.counter+=1,n.name="Box".concat(e.counter),this.originalBox=new p.g(n,i)}return Object(d.a)(e,[{key:"setPosition",value:function(e){this.originalBox.position.set(e.x,e.y,e.z)}},{key:"getOriginalBox",get:function(){return this.originalBox}}]),e}();b.BOX_SIZE=70,b.counter=0;var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;Object(l.a)(this,e),this.width=t,this.height=n,this.color=i,this.originalPlane=void 0;var o=new p.k(this.width,this.height),r=new p.h({color:this.color});this.originalPlane=new p.g(o,r)}return Object(d.a)(e,[{key:"setPosition",value:function(e){this.originalPlane.position.set(e.x,e.y,e.z)}},{key:"rotate",value:function(e){this.originalPlane.rotateX(e.x),this.originalPlane.rotateY(e.y),this.originalPlane.rotateZ(e.z)}},{key:"getOriginalPlane",get:function(){return this.originalPlane}}]),e}(),y=(n(21),function(e){Object(h.a)(n,e);var t=Object(x.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).nameEnter=i.nameEnter.bind(Object(u.a)(i)),i.sizeEnter=i.sizeEnter.bind(Object(u.a)(i)),i.colorEnter=i.colorEnter.bind(Object(u.a)(i)),i}return Object(d.a)(n,[{key:"exit",value:function(){document.querySelector(".popup").style.display="none"}},{key:"nameEnter",value:function(e){"Enter"===e.key&&(this.props.box.geometry.name=e.target.value,e.target.value="",this.forceUpdate())}},{key:"sizeEnter",value:function(e){if("Enter"===e.key){var t,n=new p.s(0,0,0);this.props.box.geometry.computeBoundingBox(),null===(t=this.props.box.geometry.boundingBox)||void 0===t||t.getSize(n);var i=n.x,o=parseInt(e.target.value)/i;this.props.box.scale.x=o,this.props.box.scale.y=o,this.props.box.scale.z=o,e.target.value="",this.forceUpdate()}}},{key:"colorEnter",value:function(e){"Enter"===e.key&&(this.props.box.material.color=new p.c(e.target.value),e.target.value="")}},{key:"render",value:function(){var e=this.props.box.scale.x*b.BOX_SIZE,t=this.props.box.material.color;return Object(i.jsxs)("div",{className:"popup",style:{top:this.props.y,left:this.props.x},children:[Object(i.jsx)("span",{className:"close",onClick:this.exit,children:"x"}),Object(i.jsx)("p",{id:"heading",children:Object(i.jsx)("strong",{children:"Info"})}),Object(i.jsxs)("label",{htmlFor:"name",children:["Name: ",this.props.box.geometry.name,Object(i.jsx)("br",{}),"Enter new name:",Object(i.jsx)("br",{})]}),Object(i.jsx)("input",{id:"name",name:"name",type:"text",onKeyDown:this.nameEnter}),Object(i.jsxs)("label",{htmlFor:"size",children:["Size: ",e,Object(i.jsx)("br",{}),"Enter new size:",Object(i.jsx)("br",{})]}),Object(i.jsx)("input",{id:"size",name:"size",type:"number",onKeyDown:this.sizeEnter}),Object(i.jsxs)("label",{htmlFor:"color",children:["Color: ",t.getHexString(),Object(i.jsx)("br",{}),"Enter new color:",Object(i.jsx)("br",{})]}),Object(i.jsx)("input",{id:"color",color:"name",type:"text",onKeyDown:this.colorEnter})]})}}]),n}(o.Component));n(22);var j=function(e){Object(h.a)(n,e);var t=Object(x.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).mount=null,i.state={x2D:0,y2D:0,x3D:0,y3D:0,z3D:0,box:new p.g},i.setWindowListeners=i.setWindowListeners.bind(Object(u.a)(i)),i.onMouseClick=i.onMouseClick.bind(Object(u.a)(i)),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=new p.o;!function(e){e.background=new p.c(13421772),e.fog=new p.e(13421772,.002);var t=new p.l(16777215,1,0);t.position.set(0,1e3,0),e.add(t);var n=new p.a(16777215,1);n.position.set(1e3,1e3,1e3),e.add(n)}(e);var t=new p.t({antialias:!0});!function(e){e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(13421772,1)}(t),this.mount.appendChild(t.domElement);var n=new p.j(60,window.innerWidth/window.innerHeight,1,1e3);!function(e){e.position.set(400,300,0)}(n);var i=new w.a(n,t.domElement);!function(e){e.enableDamping=!0,e.dampingFactor=.1,e.screenSpacePanning=!1,e.minDistance=100,e.maxDistance=250,e.maxPolarAngle=Math.PI/2}(i);var o=new v;o.setPosition(new p.s(0,-b.BOX_SIZE/2,0)),o.rotate(new p.s(-Math.PI/2)),e.add(o.getOriginalPlane);for(var r=0;r<3;r++){var a=new b(b.BOX_SIZE),s=2*Math.PI/3*r;a.setPosition(new p.s(150*Math.cos(s),0,150*Math.sin(s))),e.add(a.getOriginalBox)}this.setWindowListeners(n,t,e,i),function o(r){if(requestAnimationFrame((function(){o(r)})),i.update(),"block"===document.querySelector(".popup").style.display){var a=t.domElement,s=new p.s(r.state.x3D,r.state.y3D,r.state.z3D);s.project(n),s.x=Math.round((.5+s.x/2)*(a.width/window.devicePixelRatio)),s.y=Math.round((.5-s.y/2)*(a.height/window.devicePixelRatio)),r.setState((function(){return{x2D:s.x,y2D:s.y}}))}t.render(e,n)}(this)}},{key:"setWindowListeners",value:function(e,t,n,i){var o=this;window.addEventListener("resize",(function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}),!1),document.getElementsByClassName("resetBtn")[0].addEventListener("click",(function(){i.reset(),e.position.set(400,300,0)}));var r=t.domElement;r.addEventListener("pointerdown",(function(i){o.onMouseClick(i,e,n,t)}),!1),r.addEventListener("mousedown",(function(i){o.onMouseClick(i,e,n,t)}),!1),r.addEventListener("touchstart",(function(i){o.onMouseClick(i,e,n,t)}),!1)}},{key:"onMouseClick",value:function(e,t,n,i){var o=new p.n,r=new p.r,a=i.domElement;e instanceof MouseEvent?(r.x=e.clientX/a.width*2-1,r.y=-e.clientY/a.height*2+1,o.setFromCamera(r,t),r.x=Math.round((.5+r.x/2)*(a.width/window.devicePixelRatio)),r.y=Math.round((.5-r.y/2)*(a.height/window.devicePixelRatio))):(r.x=e.touches[0].clientX/window.innerWidth*2-1,r.y=-e.touches[0].clientY/window.innerHeight*2+1,o.setFromCamera(r,t),r.x=Math.round((.5+r.x/2)*(window.innerWidth/window.devicePixelRatio)),r.y=Math.round((.5-r.y/2)*(window.innerHeight/window.devicePixelRatio)));var s=o.intersectObjects(n.children),c=document.querySelector(".popup");if(s.length>0){var l=s[0].object;if(l.geometry.type.includes("Box")&&"none"===c.style.display){var d=s[0].point;this.setState((function(){return{x2D:r.x,y2D:r.y,x3D:d.x,y3D:d.y,z3D:d.z,box:l}})),c.style.display="block"}else c.style.display="none"}else c.style.display="none"}},{key:"render",value:function(){var e=this,t={x:this.state.x2D,y:this.state.y2D,box:this.state.box};return Object(i.jsx)("div",{children:Object(i.jsxs)("div",{ref:function(t){return e.mount=t},id:"scene",children:[Object(i.jsx)("button",{className:"resetBtn",children:"Reset view"}),Object(i.jsx)(y,Object(c.a)({},t))]})})}}]),n}(o.Component);s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(j,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.62c3dfd2.chunk.js.map
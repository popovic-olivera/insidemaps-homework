(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var i=n(6),o=n(9),r=n.n(o),a=n(12),s=n.n(a),c=(n(20),n(13)),l=n(0),d=n(4),h=n(7),u=n(2),x=n(3),p=n(1),w=n(14),v=function(){function e(t){Object(l.a)(this,e),this.originalBox=void 0;var n=new p.b(t,t,t),i=new p.j({color:1401481,shininess:50,side:p.d,flatShading:!0});e.counter+=1,n.name="Box".concat(e.counter),this.originalBox=new p.h(n,i)}return Object(d.a)(e,[{key:"setPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.originalBox.position.set(e,t,n)}},{key:"getOriginalBox",get:function(){return this.originalBox}}]),e}();v.counter=0;var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;Object(l.a)(this,e),this.width=t,this.height=n,this.color=i,this.originalPlane=void 0;var o=new p.l(this.width,this.height),r=new p.i({color:this.color});this.originalPlane=new p.h(o,r)}return Object(d.a)(e,[{key:"setPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.originalPlane.position.set(e,t,n)}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.originalPlane.rotateX(e),this.originalPlane.rotateY(t),this.originalPlane.rotateZ(n)}},{key:"getOriginalPlane",get:function(){return this.originalPlane}}]),e}(),b=(n(21),function(e){Object(u.a)(n,e);var t=Object(x.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).nameEnter=i.nameEnter.bind(Object(h.a)(i)),i.sizeEnter=i.sizeEnter.bind(Object(h.a)(i)),i.colorEnter=i.colorEnter.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"exit",value:function(){document.querySelector(".popup").style.display="none"}},{key:"nameEnter",value:function(e){"Enter"===e.key&&(this.props.box.geometry.name=e.target.value,e.target.value="")}},{key:"sizeEnter",value:function(e){if("Enter"===e.key){var t,n=new p.t(0,0,0);this.props.box.geometry.computeBoundingBox(),null===(t=this.props.box.geometry.boundingBox)||void 0===t||t.getSize(n);var i=n.x,o=parseInt(e.target.value)/i;this.props.box.scale.x=o,this.props.box.scale.y=o,this.props.box.scale.z=o,e.target.value=""}}},{key:"colorEnter",value:function(e){"Enter"===e.key&&(this.props.box.material.color=new p.c(e.target.value),e.target.value="")}},{key:"render",value:function(){var e,t=new p.t(0,0,0);this.props.box.geometry.computeBoundingBox(),null===(e=this.props.box.geometry.boundingBox)||void 0===e||e.getSize(t);var n=this.props.box.material.color;return Object(i.jsxs)("div",{className:"popup",style:{top:this.props.y,left:this.props.x},children:[Object(i.jsx)("span",{id:"close",onClick:this.exit,children:"x"}),Object(i.jsx)("p",{style:{textAlign:"center"},children:Object(i.jsx)("strong",{children:"Info"})}),Object(i.jsxs)("label",{htmlFor:"name",children:["Name: ",this.props.box.geometry.name,Object(i.jsx)("br",{}),"Enter new name:"]}),Object(i.jsx)("input",{id:"name",name:"name",type:"text",onKeyDown:this.nameEnter}),Object(i.jsxs)("label",{htmlFor:"size",children:["Size: ",t.x,Object(i.jsx)("br",{}),"Enter new size:"]}),Object(i.jsx)("input",{id:"size",name:"size",type:"number",onKeyDown:this.sizeEnter}),Object(i.jsxs)("label",{htmlFor:"color",children:["Color: ",n.getHexString(),Object(i.jsx)("br",{}),"Enter new color:"]}),Object(i.jsx)("input",{id:"color",color:"name",type:"text",onKeyDown:this.colorEnter})]})}}]),n}(o.Component));n(22);var y=function(e){Object(u.a)(n,e);var t=Object(x.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).BOX_SIZE=70,i.mount=null,i.state={x2D:0,y2D:0,x3D:0,y3D:0,z3D:0,box:new p.h},i.setWindowListeners=i.setWindowListeners.bind(Object(h.a)(i)),i.onMouseClick=i.onMouseClick.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=new p.p;!function(e){e.background=new p.c(13421772),e.fog=new p.f(13421772,.002);var t=new p.m(16777215,1,0),n=new p.a(16777215,1);t.position.set(0,1e3,0),n.position.set(1e3,1e3,1e3),e.add(t),e.add(n)}(e);var t=new p.u({antialias:!0});!function(e){e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(13421772,1)}(t),this.mount.appendChild(t.domElement);var n=new p.k(60,window.innerWidth/window.innerHeight,1,1e3);!function(e){e.position.set(400,100,0)}(n);var i=new w.a(n,t.domElement);!function(e){e.enableDamping=!0,e.dampingFactor=.1,e.screenSpacePanning=!1,e.minDistance=100,e.maxDistance=100,e.maxPolarAngle=Math.PI/2}(i);var o=new g;o.setPosition(0,-this.BOX_SIZE/2,0),o.rotate(-Math.PI/2),e.add(o.getOriginalPlane);for(var r=0;r<3;r++){var a=new v(this.BOX_SIZE),s=2*Math.PI/3*r;a.setPosition(150*Math.cos(s),0,150*Math.sin(s)),e.add(a.getOriginalBox)}this.setWindowListeners(n,t,e),function o(r){if(requestAnimationFrame((function(){o(r)})),i.update(),"block"===document.querySelector(".popup").style.display){var a=t.domElement,s=new p.t(r.state.x3D,r.state.y3D,r.state.z3D);s.project(n),s.x=Math.round((.5+s.x/2)*(a.width/window.devicePixelRatio)),s.y=Math.round((.5-s.y/2)*(a.height/window.devicePixelRatio)),r.setState((function(){return{x2D:s.x,y2D:s.y}}))}t.render(e,n)}(this)}},{key:"setWindowListeners",value:function(e,t,n){var i=this;window.addEventListener("resize",(function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener("keydown",(function(t){"r"===t.key&&e.position.set(400,100,0)}));var o=t.domElement;o.addEventListener("click",(function(o){i.onMouseClick(o,e,n,t)}),!1),o.addEventListener("touchstart",(function(o){i.onMouseClick(o,e,n,t)}),!1)}},{key:"onMouseClick",value:function(e,t,n,i){var o=new p.o,r=new p.s,a=i.domElement;e instanceof MouseEvent?(r.x=e.clientX/a.width*2-1,r.y=-e.clientY/a.height*2+1,o.setFromCamera(r,t),r.x=Math.round((.5+r.x/2)*(a.width/window.devicePixelRatio)),r.y=Math.round((.5-r.y/2)*(a.height/window.devicePixelRatio))):(r.x=e.touches[0].clientX/window.innerWidth*2-1,r.y=-e.touches[0].clientY/window.innerHeight*2+1,o.setFromCamera(r,t),r.x=Math.round((.5+r.x/2)*(window.innerWidth/window.devicePixelRatio)),r.y=Math.round((.5-r.y/2)*(window.innerHeight/window.devicePixelRatio)));var s=o.intersectObjects(n.children);if(s.length>0){var c=s[0].object,l=document.querySelector(".popup");if(c.geometry.type.includes("Box")&&"none"===l.style.display){var d=s[0].point;this.setState((function(){return{x2D:r.x,y2D:r.y,x3D:d.x,y3D:d.y,z3D:d.z,box:c}})),l.style.display="block"}else l.style.display="none"}}},{key:"render",value:function(){var e=this,t={x:this.state.x2D,y:this.state.y2D,box:this.state.box};return Object(i.jsx)("div",{children:Object(i.jsx)("div",{ref:function(t){return e.mount=t},id:"scene",children:Object(i.jsx)(b,Object(c.a)({},t))})})}}]),n}(o.Component);s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.d5b5d3ad.chunk.js.map